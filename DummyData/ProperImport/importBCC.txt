// Importing Classification
// Thanks to: 
// http://jexp.de/blog/2014/06/load-csv-into-neo4j-quickly-and-successfully/
// for help with loading, finding the path and placing constraints

// SOPTIONAL STEP 1: If you've added the old terms before...
DROP CONSTRAINT ON (t:Term) ASSERT t.name IS UNIQUE;

// STEP 1: If each Term has a unique Id
CREATE CONSTRAINT ON (t:Term) ASSERT t.id IS UNIQUE;

// STEP 2: create all the terms. Downside: can't amke custom labels? :/
USING PERIODIC COMMIT 1000
LOAD CSV WITH HEADERS FROM "file:c:/Users/Bronte/Desktop/OwlConversion/output.csv"
AS line
MERGE (term: Term {id:line.TermId})
ON CREATE SET term.name = line.TermLabel, term.id = line.TermId

// STEP 3: Find parents, merge new children (since they are terms too)
USING PERIODIC COMMIT 1000
LOAD CSV WITH HEADERS FROM 
"file:c:/Users/Bronte/Desktop/OwlConversion/output.csv"
AS line
MATCH (c {id:line.TermId})
MATCH (p {id:line.TermSubProperty})
CREATE (c)-[:PART_OF]->(p)
